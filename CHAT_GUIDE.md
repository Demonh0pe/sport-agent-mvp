# 💬 交互式问答指南

我为你创建了3个不同模式的交互式界面，可以根据需求选择！

---

## 🎯 三种模式

### 1️⃣ **标准模式** - 推荐使用 ⭐

**特点**: 显示详细但不冗余，适合日常使用

**启动**:
```bash
cd /Users/dylan/Desktop/sport\ agent\ mvp
source .venv/bin/activate
python scripts/chat_with_agent.py
```

**界面效果**:
```
================================================================================
🤖 Sport Agent MVP - 交互式问答系统
================================================================================

💡 使用说明:
   - 输入你的问题，按回车提交
   - 输入 'exit' 或 'quit' 或 'q' 退出
   - 输入 'clear' 清屏
   - 输入 'help' 查看示例问题

🎯 示例问题:
   • 曼联最近5场比赛的战绩如何？
   • 预测一下曼城和阿森纳的比赛
   • 利物浦在英超中处于什么地位？
   • 皇马对巴萨，谁会赢？

================================================================================

💬 你的问题: 
```

**显示内容**:
- ✅ Agent回答
- ✅ 工具调用列表和耗时
- ✅ 输出预览
- ✅ 总响应时间

---

### 2️⃣ **简洁模式** - 快速对话

**特点**: 只显示问题和回答，最简洁

**启动**:
```bash
python scripts/chat_simple.py
```

**界面效果**:
```
============================================================
🤖 Sport Agent - 简洁对话模式
============================================================
输入问题开始对话，输入 'exit' 退出
============================================================

❓ 你: 曼联最近5场比赛的战绩如何

🤖 Agent: 根据提供的数据，曼联最近5场比赛的战绩为：
- 2025-11-24: 曼联 vs 埃弗顿 (0:1) 负
- 2025-11-08: 托特纳姆 vs 曼联 (2:2) 平
- 2025-11-01: 诺丁汉 vs 曼联 (2:2) 平
- 2025-10-25: 曼联 vs 布莱顿 (4:2) 胜
- 2025-10-19: 利物浦 vs 曼联 (1:2) 胜

总战绩: 2胜2平1负

❓ 你: 
```

**显示内容**:
- ✅ 问题
- ✅ 回答
- ❌ 不显示工具调用

---

### 3️⃣ **调试模式** - 开发调试用

**特点**: 显示完整的工具调用、参数、输出，适合调试

**启动**:
```bash
python scripts/chat_debug.py
```

**界面效果**:
```
================================================================================
🔧 Sport Agent - 调试模式
================================================================================
显示所有工具调用、参数和输出
输入 'exit' 退出
================================================================================

💬 问题: 曼联最近5场比赛的战绩如何

================================================================================
🔍 开始处理查询
================================================================================
16:30:45 | DEBUG    | Calling LLM...
16:30:47 | DEBUG    | LLM Response received

================================================================================
📋 执行计划
================================================================================
1. MatchResolverTool(query='曼联最近5场比赛的战绩如何')
2. StatsAnalysisTool(match_id=$match_id, scope='team', window='last5')
3. LLMAugmentorTool(context=$tool_outputs)

================================================================================
🔧 工具执行详情
================================================================================

[工具 1] MatchResolverTool
状态: success
耗时: 35ms
输入参数:
{
  "query": "曼联最近5场比赛的战绩如何"
}
输出:
📊 曼联 (MUN) 近 5 场比赛记录：
- 日期: 2025-11-24 | 对阵: MUN vs EVE | 比分: 0 : 1 (负)
...

================================================================================
💬 最终回答
================================================================================
根据提供的数据，曼联最近5场比赛...

================================================================================
⏱️  总耗时: 2156ms
================================================================================
```

**显示内容**:
- ✅ 完整日志
- ✅ 执行计划
- ✅ 工具调用详情（输入参数、输出、错误）
- ✅ 最终回答
- ✅ 详细耗时

---

## 🚀 快速开始

### 推荐：使用标准模式

```bash
# 1. 激活环境
cd /Users/dylan/Desktop/sport\ agent\ mvp
source .venv/bin/activate

# 2. 启动交互界面
python scripts/chat_with_agent.py

# 3. 开始提问！
💬 你的问题: 曼联最近5场比赛的战绩如何
```

---

## 📝 支持的命令

### 所有模式通用

| 命令 | 说明 |
|------|------|
| `exit` / `quit` / `q` | 退出程序 |
| Ctrl+C | 中断当前查询或退出 |

### 标准模式额外命令

| 命令 | 说明 |
|------|------|
| `help` | 显示示例问题 |
| `clear` | 清屏 |

---

## 💡 示例问题

### 比赛预测
```
曼联对利物浦，谁会赢？
预测一下拜仁和多特的比赛
皇马vs巴萨，哪个队会获胜
切尔西和阿森纳的比赛，看好哪一方
```

### 战绩查询
```
曼联最近5场比赛的战绩如何
利物浦近期表现怎么样
阿森纳最近胜率如何
曼城最近的比赛情况
```

### 排名查询
```
利物浦在英超中处于什么地位
曼城现在排名第几
阿森纳积分榜排名
```

### 对战分析
```
曼联和切尔西历史交锋记录
皇马对巴萨的往绩如何
利物浦和曼城最近几次交手
```

---

## 🎨 界面对比

| 功能 | 标准模式 | 简洁模式 | 调试模式 |
|------|---------|---------|---------|
| Agent回答 | ✅ | ✅ | ✅ |
| 工具调用列表 | ✅ | ❌ | ✅ |
| 执行耗时 | ✅ | ❌ | ✅ |
| 输入参数 | ❌ | ❌ | ✅ |
| 完整输出 | 预览 | ❌ | ✅ |
| 详细日志 | ❌ | ❌ | ✅ |
| 执行计划 | ❌ | ❌ | ✅ |
| 帮助命令 | ✅ | ❌ | ❌ |
| 清屏命令 | ✅ | ❌ | ❌ |

**推荐场景**:
- 🌟 **日常使用**: 标准模式 (`chat_with_agent.py`)
- ⚡ **快速测试**: 简洁模式 (`chat_simple.py`)
- 🔧 **问题调试**: 调试模式 (`chat_debug.py`)

---

## 🛠️ 高级用法

### 1. 测试特定球队

```bash
python scripts/chat_with_agent.py
# 然后连续提问
💬 你的问题: 曼联最近5场比赛的战绩如何
💬 你的问题: 曼联对利物浦的历史交锋
💬 你的问题: 预测曼联下一场比赛
```

### 2. 批量测试问题

创建一个测试文件 `test_questions.txt`:
```
曼联最近5场比赛的战绩如何
利物浦在英超中处于什么地位
皇马vs巴萨，谁会赢
```

然后运行:
```bash
cat test_questions.txt | python scripts/chat_simple.py
```

### 3. 保存对话记录

```bash
python scripts/chat_with_agent.py | tee chat_log.txt
```

---

## ⚠️ 注意事项

### 1. 数据库连接

确保数据库正在运行:
```bash
docker-compose ps
# 应该看到 postgres 服务在运行
```

### 2. 环境激活

每次使用前必须激活虚拟环境:
```bash
source .venv/bin/activate
```

### 3. 日志级别

- **标准模式**: 只显示错误日志
- **简洁模式**: 不显示日志
- **调试模式**: 显示所有日志（DEBUG级别）

### 4. 响应时间

首次查询可能较慢（需要加载模型），后续查询会更快。

---

## 🐛 常见问题

### Q: 提示"命令未找到: python"

**A**: 使用 `python3` 代替 `python`
```bash
python3 scripts/chat_with_agent.py
```

### Q: 连接数据库失败

**A**: 检查数据库是否启动
```bash
docker-compose up -d postgres
```

### Q: 回答速度很慢

**A**: 
1. 首次查询需要加载模型（10-20秒）
2. LLM调用需要时间（5-15秒）
3. 正常响应时间: 2-5秒

### Q: 想修改界面样式

**A**: 编辑对应的脚本文件:
- 标准模式: `scripts/chat_with_agent.py`
- 简洁模式: `scripts/chat_simple.py`
- 调试模式: `scripts/chat_debug.py`

---

## 📚 相关文档

- [测试指南](./TESTING_GUIDE.md) - 完整测试方法
- [数据修复报告](./docs/数据真实性修复报告.md) - 数据真实性验证
- [Agent设计文档](./docs/agent-design.md) - Agent架构说明

---

**享受与Agent的对话！** 🤖✨

如有问题或建议，请随时反馈。

